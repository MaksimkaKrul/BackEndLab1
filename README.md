# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ4: –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (JWT)

–¶–µ–π –ø—Ä–æ–µ–∫—Ç —î —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º REST API –¥–ª—è –æ–±–ª—ñ–∫—É –≤–∏—Ç—Ä–∞—Ç. –£ —Ä–∞–º–∫–∞—Ö —á–µ—Ç–≤–µ—Ä—Ç–æ—ó –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –±—É–ª–æ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–æ —Å–∏—Å—Ç–µ–º—É –±–µ–∑–ø–µ–∫–∏: –¥–æ–¥–∞–Ω–æ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é —Ç–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é JSON Web Tokens (JWT), —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ —Ç–∞ –∑–∞—Ö–∏—Å—Ç –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤ –≤—ñ–¥ –Ω–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É.

## üöÄ –ó–∞–¥–µ–ø–ª–æ—î–Ω–∏–π —Å–µ—Ä–≤—ñ—Å

–°–µ—Ä–≤—ñ—Å —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ –Ω–∞ Render.com —ñ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ—é –∞–¥—Ä–µ—Å–æ—é:

*   **–û—Å–Ω–æ–≤–Ω–∏–π URL:** `https://backendlab4-jpit.onrender.com`
*   **Github –ø–æ—Å–∏–ª–∞–Ω–Ω—è** `https://github.com/MaksimkaKrul/BackEndLab1/tree/feature/lab4`

## üîê –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –±–µ–∑–ø–µ–∫–∏

–£ —Ü—ñ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ñ–π —Ä–æ–±–æ—Ç—ñ –¥–æ–¥–∞–Ω–æ —Ç–∞–∫—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:
1.  **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è:** –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–º —Ö–µ—à—É–≤–∞–Ω–Ω—è–º –ø–∞—Ä–æ–ª—é (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º `pbkdf2_sha256`).
2.  **–õ–æ–≥—ñ–Ω:** –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö —Ç–∞ –≤–∏–¥–∞—á–∞ `access_token` (JWT).
3.  **–ó–∞—Ö–∏—Å—Ç –¥–æ—Å—Ç—É–ø—É:** –£—Å—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑–º—ñ–Ω–∏ –¥–∞–Ω–∏—Ö (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –≤–∏–¥–∞–ª–µ–Ω–Ω—è) —Ç–∞ –ø–µ—Ä–µ–≥–ª—è–¥—É —á—É—Ç–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –¥–æ—Å—Ç—É–ø–Ω—ñ –ª–∏—à–µ –∑ –≤–∞–ª—ñ–¥–Ω–∏–º —Ç–æ–∫–µ–Ω–æ–º.
4.  **Swagger UI Auth:** –î–æ–¥–∞–Ω–æ –∫–Ω–æ–ø–∫—É "Authorize" –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –¥–ª—è –∑—Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞—Ö–∏—â–µ–Ω–∏—Ö —Ä—É—á–æ–∫.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

–î–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å—Ç–µ–∫—É –¥–æ–¥–∞–Ω–æ –Ω–æ–≤—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –¥–ª—è –±–µ–∑–ø–µ–∫–∏:

*   **Python 3.11**
*   **Flask** —Ç–∞ **Flask-Smorest**
*   **Flask-JWT-Extended** ‚Äî –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Ç–æ–∫–µ–Ω–∞–º–∏ (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –≤–∞–ª—ñ–¥–∞—Ü—ñ—è, –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫).
*   **Passlib** ‚Äî –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤.
*   **PostgreSQL** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–∏—Ö.
*   **Docker** —Ç–∞ **Docker Compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è.

## ‚öôÔ∏è –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫

–î–ª—è –∑–∞–ø—É—Å–∫—É –æ–Ω–æ–≤–ª–µ–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó –ø—Ä–æ–µ–∫—Ç—É –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó:

1.  **–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:**
    ```bash
    git clone https://github.com/MaksimkaKrul/BackEndLab1
    cd BackEndLab1
    ```

2.  **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç (–∑ –ø–µ—Ä–µ–∑–±—ñ—Ä–∫–æ—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤):**
    –û—Å–∫—ñ–ª—å–∫–∏ –¥–æ–¥–∞–ª–∏—Å—è –Ω–æ–≤—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–±—É–¥—É–≤–∞—Ç–∏ –æ–±—Ä–∞–∑:
    ```bash
    docker-compose up --build
    ```

3.  **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:**
    –Ø–∫—â–æ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –±—É–ª–∞ —Å–∫–∏–Ω—É—Ç–∞ –∞–±–æ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –≤–ø–µ—Ä—à–µ:
    ```bash
    docker-compose exec web python -c "from app import app; from my_app import db; app.app_context().push(); db.create_all()"
    ```

4.  **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
    *   –î–æ–¥–∞—Ç–æ–∫: `http://localhost:5000`
    *   –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (Swagger): `http://localhost:5000/swagger-ui`

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è (Postman Flow)

–£ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó –¥–æ–¥–∞–Ω–æ —Ñ–∞–π–ª `Lab4.postman_collection.json`, —è–∫–∏–π –º—ñ—Å—Ç–∏—Ç—å –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π (Flow):

1.  **Register:** –°—Ç–≤–æ—Ä—é—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î –π–æ–≥–æ –≤ –ë–î.
2.  **Login:** –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –ª–æ–≥—ñ–Ω/–ø–∞—Ä–æ–ª—å, –æ—Ç—Ä–∏–º—É—î —Ç–æ–∫–µ–Ω.
    *   *–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è:* –°–∫—Ä–∏–ø—Ç —É Postman –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—î –æ—Ç—Ä–∏–º–∞–Ω–∏–π —Ç–æ–∫–µ–Ω —É –∑–º—ñ–Ω–Ω—É –∫–æ–ª–µ–∫—Ü—ñ—ó `jwt_token`.
3.  **Protected Requests:** –í—Å—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–∞–ø–∏—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `Create Record`, `Get Users`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ü–µ–π —Ç–æ–∫–µ–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó (Bearer Token).

## üìñ API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### –ù–æ–≤—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏:
*   **POST** `/register` ‚Äî –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–ø—Ä–∏–π–º–∞—î `name`, `password`).
*   **POST** `/login` ‚Äî –í—Ö—ñ–¥ —É —Å–∏—Å—Ç–µ–º—É (–ø–æ–≤–µ—Ä—Ç–∞—î JWT —Ç–æ–∫–µ–Ω).

### –ó–∞—Ö–∏—â–µ–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ (–≤–∏–º–∞–≥–∞—é—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`):
*   **User:** `DELETE /user/{id}`, `GET /user`, `GET /user/{id}`
*   **Category:** `POST /category`, `DELETE /category/{id}`
*   **Record:** `POST /record`, `GET /record`, `DELETE /record/{id}`
*   **Currency:** `POST /currency`, `GET /currency`
